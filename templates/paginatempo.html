<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>Monitoramento de Ambiente</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #eef2f3;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
        }
        .painel {
            background-color: #fff;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
            text-align: center;
        }
        .painel h1 {
            margin-bottom: 20px;
        }
        .dado {
            font-size: 1.5em;
            margin: 10px 0;
        }
        select {
            font-size: 1em;
            padding: 5px;
            margin: 10px 0;
        }
    </style>
</head>
<body>
    <div class="painel">
        <h1>Monitoramento de Ambiente</h1>

        <!-- Caixa de sele√ß√£o para estados -->
        <div>
            <label for="estado">Escolha um estado:</label>
            <select id="estado" onchange="atualizarCidades()">
                <option value="">Selecione um estado</option>
                <option value="SP">S√£o Paulo</option>
                <option value="RJ">Rio de Janeiro</option>
                <option value="MG">Minas Gerais</option>
                <option value="BA">Bahia</option>
                <option value="RS">Rio Grande do Sul</option>
            </select>
        </div>

        <!-- Caixa de sele√ß√£o para cidades -->
        <div>
            <label for="cidade">Escolha uma cidade:</label>
            <select id="cidade" onchange="enviarDados()">
                <option value="">Selecione uma cidade</option>
            </select>
        </div>

        <div class="dado">üèôÔ∏è Cidade: <strong id="cid">---</strong></div>
        <div class="dado">üó∫Ô∏è Regi√£o: <strong id="reg">---</strong></div>
        <div class="dado">üå°Ô∏è Temperatura: <strong id="temp">---</strong>¬∞C</div>
        <div class="dado">üíß Umidade: <strong id="umid">---</strong>%</div>
        <div class="dado">üå§Ô∏è Condi√ß√£o: <strong id="cond">---</strong></div>
        <div class="dado">ü´° Visibilidade: <strong id="vis">---</strong>km</div>
        <div class="dado">‚öñÔ∏è Press√£o Atmosf√©rica: <strong id="press">---</strong>hPA</div>
    </div>

    <script>
        const cidadesPorEstado = {
            "SP": ["S√£o Paulo", "Campinas", "Santos", "Ribeir√£o Preto"],
            "RJ": ["Rio de Janeiro", "Niter√≥i", "Petr√≥polis", "Angra dos Reis"],
            "MG": ["Belo Horizonte", "Uberl√¢ndia", "Juiz de Fora", "Montes Claros"],
            "BA": ["Salvador", "Feira de Santana", "Vit√≥ria da Conquista", "Ilh√©us"],
            "RS": ["Porto Alegre", "Caxias do Sul", "Pelotas", "Santa Maria"]
        };

        function atualizarCidades() {
            const estadoSelecionado = document.getElementById("estado").value;
            const cidadeSelect = document.getElementById("cidade");

            cidadeSelect.innerHTML = "<option value=''>Selecione uma cidade</option>";

            if (estadoSelecionado && cidadesPorEstado[estadoSelecionado]) {
                cidadesPorEstado[estadoSelecionado].forEach(cidade => {
                    const option = document.createElement("option");
                    option.value = cidade;
                    option.textContent = cidade;
                    cidadeSelect.appendChild(option);
                });
            }
        }

        function enviarDados() {
            var estado = document.getElementById("estado").value;
            var cidade = document.getElementById("cidade").value;

            if (estado && cidade) {
                fetch(`/processar?estado=${estado}&cidade=${cidade}`)
                .then(response => response.text())
                .then(data => {
                    document.getElementById("resultado").innerHTML = data;
                });
            }
        }
    </script>
</body>
</html>